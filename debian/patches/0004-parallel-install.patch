From: "Barak A. Pearlmutter" <barak+git@cs.nuim.ie>
Date: Thu, 12 Jul 2012 12:10:44 +0100
Subject: parallel install

Allow parallelism during "make install" by ensuring that each
installation stanza creates any directories it targets.  This might
result in multiple creation; that is okay.
---
 Makefile | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/Makefile b/Makefile
index 7979884..5bd71a6 100644
--- a/Makefile
+++ b/Makefile
@@ -150,6 +150,7 @@ install-s9:	s9 s9.scm s9.image s9.1.gz
 	(cd $(LIBDIR) && ./make-help-links && rm make-help-links)
 
 install-util:
+	install -d -m 0755 $(BINDIR)
 	sed -e "s|^#! /usr/local|#! $(PREFIX)|"	\
 		<prog/s9help.scm >$(BINDIR)/s9help
 	sed -e "s|^#! /usr/local|#! $(PREFIX)|"	\
@@ -163,7 +164,17 @@ install-util:
 		  $(BINDIR)/scm2html	\
 		  $(BINDIR)/scmpp
 
+install-s9e:	s9e-core.image
+	install -d -m 0755 $(BINDIR)
+	install -d -m 0755 $(LIBDIR)
+	ln -fs $(BINDIR)/s9 $(BINDIR)/s9e-core
+	install $C -m 0644 s9e-core.image $(LIBDIR)
+	sed -e "s|^#! /usr/local|#! $(PREFIX)|"	\
+		<prog/s9e1.scm >$(BINDIR)/s9e
+	-chmod +x $(BINDIR)/s9e
+
 install-progs:
+	install -d -m 0755 $(BINDIR)
 	sed -e "s|^#! /usr/local|#! $(PREFIX)|"	\
 		<prog/advgen.scm >$(BINDIR)/advgen
 	sed -e "s|^#! /usr/local|#! $(PREFIX)|"	\
